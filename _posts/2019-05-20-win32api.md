---
title: win32api
layout: post
feature_image: "/image/898.jpg"
category:
    - Code-Snippet
---

**处理控制键：**

```C
BOOL WINAPI HandlerRoutine(DWORD dwCtrlType) {
    switch (dwCtrlType)
    {
    case CTRL_C_EVENT:
        printf("[Ctrl]+C\n");
        isRunnung = false;
        // Signal is handled - don't pass it on to the next handler
        return TRUE;
    default:
        // Pass signal on to the next handler
        return FALSE;
    }
}

int main(int argc, _TCHAR* argv[])
{
    // SetConsoleCtrHandler(NULL, TRUE); // ignore any ctrl key

    SetConsoleCtrlHandler(HandlerRoutine, TRUE);

    printf("Starting\n");
    while ( isRunnung ) {
        Sleep(0);
    }
    printf("Ending\n");

   return 0;
}
```